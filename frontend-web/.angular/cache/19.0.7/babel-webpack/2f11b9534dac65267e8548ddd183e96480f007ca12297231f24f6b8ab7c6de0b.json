{"ast":null,"code":"import { TestBed } from '@angular/core/testing';\nimport { NotificationsComponent } from './notification.component';\nimport { PostService } from '@services/post-service.service';\nimport { Router } from '@angular/router';\nimport { of } from 'rxjs';\nimport { Notificatie } from '@models/notificatie.model';\ndescribe('NotificationsComponent', () => {\n  let component;\n  let fixture;\n  let mockPostService;\n  let mockRouter;\n  beforeEach(() => {\n    mockPostService = jasmine.createSpyObj('PostService', ['getNotifications']);\n    mockRouter = jasmine.createSpyObj('Router', ['navigate']);\n    TestBed.configureTestingModule({\n      imports: [NotificationsComponent],\n      providers: [{\n        provide: PostService,\n        useValue: mockPostService\n      }, {\n        provide: Router,\n        useValue: mockRouter\n      }]\n    });\n    fixture = TestBed.createComponent(NotificationsComponent);\n    component = fixture.componentInstance;\n  });\n  it('should create the component', () => {\n    expect(component).toBeTruthy();\n  });\n  it('should load notifications on ngOnInit', () => {\n    const mockNotifications = [new Notificatie('1', 'Post Title 1', '101', 'REJECTED', 'Reason 1'), new Notificatie('2', 'Post Title 2', '102', 'ACCEPTED', '')];\n    mockPostService.getNotifications.and.returnValue(of(mockNotifications));\n    component.ngOnInit();\n    fixture.detectChanges();\n    expect(component.notifications).toEqual(mockNotifications);\n  });\n  it('should handle notification click and navigate if status is REJECTED', () => {\n    const notification = new Notificatie('1', 'Post Title 1', '101', 'REJECTED', 'Reason 1');\n    component.handleNotificationClick(notification);\n    expect(mockRouter.navigate).toHaveBeenCalledWith([`/notifications/${notification.postId}`]);\n  });\n  it('should not navigate if notification status is not REJECTED', () => {\n    const notification = new Notificatie('2', 'Post Title 2', '102', 'ACCEPTED', '');\n    component.handleNotificationClick(notification);\n    expect(mockRouter.navigate).not.toHaveBeenCalled();\n  });\n  it('should log an error when loading notifications fails', () => {\n    spyOn(console, 'error');\n    mockPostService.getNotifications.and.returnValue(of(new Error('Error loading notifications')));\n    component.loadNotifications();\n    expect(console.error).toHaveBeenCalledWith('Error loading notifications:', jasmine.any(Error));\n  });\n});","map":{"version":3,"names":["TestBed","NotificationsComponent","PostService","Router","of","Notificatie","describe","component","fixture","mockPostService","mockRouter","beforeEach","jasmine","createSpyObj","configureTestingModule","imports","providers","provide","useValue","createComponent","componentInstance","it","expect","toBeTruthy","mockNotifications","getNotifications","and","returnValue","ngOnInit","detectChanges","notifications","toEqual","notification","handleNotificationClick","navigate","toHaveBeenCalledWith","postId","not","toHaveBeenCalled","spyOn","console","Error","loadNotifications","error","any"],"sources":["C:\\School\\PXL\\2024-2025\\Fullstack Java\\Opdracht\\Code\\project-WesleyKissenPXL\\frontend-web\\src\\app\\notificationPage\\notification.component.spec.ts"],"sourcesContent":["import { ComponentFixture, TestBed } from '@angular/core/testing';\r\nimport { NotificationsComponent } from './notification.component';\r\nimport { PostService } from '@services/post-service.service';\r\nimport { Router } from '@angular/router';\r\nimport { of } from 'rxjs';\r\nimport { Notificatie } from '@models/notificatie.model';\r\n\r\ndescribe('NotificationsComponent', () => {\r\n  let component: NotificationsComponent;\r\n  let fixture: ComponentFixture<NotificationsComponent>;\r\n  let mockPostService: jasmine.SpyObj<PostService>;\r\n  let mockRouter: jasmine.SpyObj<Router>;\r\n\r\n  beforeEach(() => {\r\n    mockPostService = jasmine.createSpyObj('PostService', ['getNotifications']);\r\n    mockRouter = jasmine.createSpyObj('Router', ['navigate']);\r\n\r\n    TestBed.configureTestingModule({\r\n      imports: [NotificationsComponent],\r\n      providers: [\r\n        { provide: PostService, useValue: mockPostService },\r\n        { provide: Router, useValue: mockRouter },\r\n      ],\r\n    });\r\n\r\n    fixture = TestBed.createComponent(NotificationsComponent);\r\n    component = fixture.componentInstance;\r\n  });\r\n\r\n  it('should create the component', () => {\r\n    expect(component).toBeTruthy();\r\n  });\r\n\r\n  it('should load notifications on ngOnInit', () => {\r\n    const mockNotifications: Notificatie[] = [\r\n      new Notificatie('1', 'Post Title 1', '101', 'REJECTED', 'Reason 1'),\r\n      new Notificatie('2', 'Post Title 2', '102', 'ACCEPTED', ''),\r\n    ];\r\n    \r\n    mockPostService.getNotifications.and.returnValue(of(mockNotifications));\r\n\r\n    component.ngOnInit();\r\n    fixture.detectChanges();\r\n\r\n    expect(component.notifications).toEqual(mockNotifications);\r\n  });\r\n\r\n  it('should handle notification click and navigate if status is REJECTED', () => {\r\n    const notification: Notificatie = new Notificatie('1', 'Post Title 1', '101', 'REJECTED', 'Reason 1');\r\n    \r\n    component.handleNotificationClick(notification);\r\n\r\n    expect(mockRouter.navigate).toHaveBeenCalledWith([`/notifications/${notification.postId}`]);\r\n  });\r\n\r\n  it('should not navigate if notification status is not REJECTED', () => {\r\n    const notification: Notificatie = new Notificatie('2', 'Post Title 2', '102', 'ACCEPTED', '');\r\n    \r\n    component.handleNotificationClick(notification);\r\n\r\n    expect(mockRouter.navigate).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('should log an error when loading notifications fails', () => {\r\n    spyOn(console, 'error');\r\n    mockPostService.getNotifications.and.returnValue(of(new Error('Error loading notifications')));\r\n\r\n    component.loadNotifications();\r\n\r\n    expect(console.error).toHaveBeenCalledWith('Error loading notifications:', jasmine.any(Error));\r\n  });\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}